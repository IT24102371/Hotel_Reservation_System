<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::title}, ~{::content})}">
<head>
    <title>Booking Confirmation - Hotel Event Reservation System</title>
</head>
<body>
    <div th:fragment="content">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header bg-success text-white">
                        <h4 class="mb-0">
                            <i class="fas fa-check-circle me-2"></i>Booking Confirmation
                        </h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h5>Booking Details</h5>
                                <table class="table table-borderless">
                                    <tr>
                                        <td><strong>Reference Code:</strong></td>
                                        <td><code th:text="${booking.referenceCode}">REF123</code></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Event Type:</strong></td>
                                        <td th:text="${booking.eventType}">Wedding</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Date:</strong></td>
                                        <td th:text="${#temporals.format(booking.eventDate, 'EEEE, MMMM dd, yyyy')}">Saturday, January 15, 2024</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Time:</strong></td>
                                        <td th:text="${#temporals.format(booking.startTime, 'HH:mm') + ' - ' + #temporals.format(booking.endTime, 'HH:mm')}">18:00 - 23:00</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Venue:</strong></td>
                                        <td th:text="${booking.venue.venueName}">Grand Ballroom</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Guest Count:</strong></td>
                                        <td th:text="${booking.guestCount}">100</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Total Cost:</strong></td>
                                        <td><strong th:text="${#numbers.formatCurrency(booking.totalCost)}">$750.00</strong></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Status:</strong></td>
                                        <td>
                                            <span class="badge bg-warning" th:text="${booking.bookingStatus}">PENDING</span>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-md-6 text-center">
                                <h5>QR Code</h5>
                                <div th:if="${booking.qrCodePath != null}">
                                    <img th:src="${booking.qrCodePath}" class="qr-code img-fluid" alt="QR Code">
                                    <p class="mt-2 text-muted">
                                        <small>Present this QR code at the reception desk</small>
                                    </p>
                                </div>
                                <div th:if="${booking.qrCodePath == null}" class="text-muted">
                                    <i class="fas fa-qrcode fa-3x mb-2"></i>
                                    <p>QR Code will be generated shortly</p>
                                </div>
                            </div>
                        </div>

                        <!-- Decor Preferences -->
                        <div th:if="${booking.decorPreferences != null}" class="mt-4">
                            <h5><i class="fas fa-palette me-2"></i>Decor Preferences</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <p th:if="${booking.decorPreferences.theme != null}">
                                        <strong>Theme:</strong> <span th:text="${booking.decorPreferences.theme}">Elegant</span>
                                    </p>
                                    <p th:if="${booking.decorPreferences.colorScheme != null}">
                                        <strong>Color Scheme:</strong> <span th:text="${booking.decorPreferences.colorScheme}">Gold & White</span>
                                    </p>
                                </div>
                                <div class="col-md-6">
                                    <p th:if="${booking.decorPreferences.flowerArrangements != null}">
                                        <strong>Flower Arrangements:</strong> <span th:text="${booking.decorPreferences.flowerArrangements}">Roses and Lilies</span>
                                    </p>
                                    <p th:if="${booking.decorPreferences.lightingPreferences != null}">
                                        <strong>Lighting:</strong> <span th:text="${booking.decorPreferences.lightingPreferences}">Warm ambient lighting</span>
                                    </p>
                                </div>
                            </div>
                            <p th:if="${booking.decorPreferences.additionalDecorRequests != null}">
                                <strong>Additional Requests:</strong> <span th:text="${booking.decorPreferences.additionalDecorRequests}">Custom centerpieces</span>
                            </p>
                        </div>

                        <!-- Catering Preferences -->
                        <div th:if="${booking.cateringPreferences != null}" class="mt-4">
                            <h5><i class="fas fa-utensils me-2"></i>Catering Preferences</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <p>
                                        <strong>Meal Type:</strong> <span th:text="${booking.cateringPreferences.mealType}">DINNER</span>
                                    </p>
                                    <p th:if="${booking.cateringPreferences.cuisineType != null}">
                                        <strong>Cuisine:</strong> <span th:text="${booking.cateringPreferences.cuisineType}">Italian</span>
                                    </p>
                                    <p>
                                        <strong>Serving Style:</strong> <span th:text="${booking.cateringPreferences.servingStyle}">BUFFET</span>
                                    </p>
                                </div>
                                <div class="col-md-6">
                                    <p th:if="${booking.cateringPreferences.dietaryRestrictions != null}">
                                        <strong>Dietary Restrictions:</strong> <span th:text="${booking.cateringPreferences.dietaryRestrictions}">Vegetarian options</span>
                                    </p>
                                    <p th:if="${booking.cateringPreferences.specialDishes != null}">
                                        <strong>Special Dishes:</strong> <span th:text="${booking.cateringPreferences.specialDishes}">Lobster bisque</span>
                                    </p>
                                    <p th:if="${booking.cateringPreferences.beveragePreferences != null}">
                                        <strong>Beverages:</strong> <span th:text="${booking.cateringPreferences.beveragePreferences}">Wine and champagne</span>
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Special Requests -->
                        <div th:if="${booking.specialRequests != null}" class="mt-4">
                            <h5><i class="fas fa-comment me-2"></i>Special Requests</h5>
                            <p th:text="${booking.specialRequests}">Please ensure the venue is accessible for wheelchair users.</p>
                        </div>

                        <div class="mt-4">
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle me-2"></i>
                                <strong>Important:</strong> Please keep your reference code safe. You'll need it for any future inquiries or modifications to your booking.
                            </div>
                        </div>

                        <div class="mt-4 text-center">
                            <a href="/guest/dashboard" class="btn btn-primary me-2">
                                <i class="fas fa-home me-1"></i>Back to Dashboard
                            </a>
                            <a href="/guest/my-bookings" class="btn btn-outline-primary">
                                <i class="fas fa-list me-1"></i>View All Bookings
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
