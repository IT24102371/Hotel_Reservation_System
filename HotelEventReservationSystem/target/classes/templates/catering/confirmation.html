<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::title}, ~{::content})}">
<head>
    <title>Catering Confirmation - Hotel Event Reservation System</title>
</head>
<body>
    <div th:fragment="content">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2><i class="fas fa-utensils me-2"></i>Catering Confirmation</h2>
            <a href="/catering/tasks" class="btn btn-outline-secondary">
                <i class="fas fa-arrow-left me-1"></i>Back to Tasks
            </a>
        </div>

        <div class="row">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-calendar-check me-2"></i>Event Details</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Event Information</h6>
                                <p><strong>Reference:</strong> <code th:text="${booking.referenceCode}">REF123</code></p>
                                <p><strong>Event Type:</strong> <span th:text="${booking.eventType}">Wedding</span></p>
                                <p><strong>Date:</strong> <span th:text="${#temporals.format(booking.eventDate, 'MMM dd, yyyy')}">Jan 15, 2024</span></p>
                                <p><strong>Time:</strong> <span th:text="${booking.startTime + ' - ' + booking.endTime}">10:00 - 12:00</span></p>
                                <p><strong>Venue:</strong> <span th:text="${booking.venue.venueName}">Grand Ballroom</span></p>
                                <p><strong>Guest Count:</strong> <span th:text="${booking.guestCount}">100</span></p>
                            </div>
                            <div class="col-md-6">
                                <h6>Guest Information</h6>
                                <p><strong>Name:</strong> <span th:text="${booking.guest.firstName + ' ' + booking.guest.lastName}">John Doe</span></p>
                                <p><strong>Email:</strong> <span th:text="${booking.guest.email}">john@example.com</span></p>
                                <p><strong>Phone:</strong> <span th:text="${booking.guest.phone ?: 'N/A'}">+1-555-0123</span></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Catering Preferences -->
                <div class="card mt-4" th:if="${booking.cateringPreferences != null}">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-utensils me-2"></i>Guest Catering Preferences</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <p th:if="${booking.cateringPreferences.mealType != null}">
                                    <strong>Meal Type:</strong> <span th:text="${booking.cateringPreferences.mealType}">DINNER</span>
                                </p>
                                <p th:if="${booking.cateringPreferences.cuisineType != null}">
                                    <strong>Cuisine Type:</strong> <span th:text="${booking.cateringPreferences.cuisineType}">Italian</span>
                                </p>
                                <p th:if="${booking.cateringPreferences.dietaryRestrictions != null}">
                                    <strong>Dietary Restrictions:</strong> <span th:text="${booking.cateringPreferences.dietaryRestrictions}">Vegetarian</span>
                                </p>
                            </div>
                            <div class="col-md-6">
                                <p th:if="${booking.cateringPreferences.specialDishes != null}">
                                    <strong>Special Dishes:</strong> <span th:text="${booking.cateringPreferences.specialDishes}">None</span>
                                </p>
                                <p th:if="${booking.cateringPreferences.beveragePreferences != null}">
                                    <strong>Beverage Preferences:</strong> <span th:text="${booking.cateringPreferences.beveragePreferences}">Wine</span>
                                </p>
                                <p th:if="${booking.cateringPreferences.servingStyle != null}">
                                    <strong>Serving Style:</strong> <span th:text="${booking.cateringPreferences.servingStyle}">BUFFET</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Catering Confirmation Form -->
                <div class="card mt-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-check-circle me-2"></i>Catering Confirmation</h5>
                    </div>
                    <div class="card-body">
                        <form th:action="@{/catering/confirmation/{id}/confirm(id=${booking.bookingId})}" method="post">
                            <div class="mb-3">
                                <label class="form-label">Catering Status</label>
                                <select name="cateringStatus" class="form-select">
                                    <option value="">Select status...</option>
                                    <option value="CONFIRMED">Confirmed</option>
                                    <option value="IN_PROGRESS">In Progress</option>
                                    <option value="NEEDS_CLARIFICATION">Needs Clarification</option>
                                    <option value="CANCELLED">Cancelled</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Catering Lead Notes</label>
                                <textarea name="cateringNotes" class="form-control" rows="4" 
                                          placeholder="Add catering notes, special requirements, menu details, or any issues..."></textarea>
                            </div>
                            <button type="submit" class="btn btn-success">
                                <i class="fas fa-check me-1"></i>Confirm Catering
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-clipboard-list me-2"></i>Catering Checklist</h5>
                    </div>
                    <div class="card-body">
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="check1">
                            <label class="form-check-label" for="check1">Menu confirmed</label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="check2">
                            <label class="form-check-label" for="check2">Dietary requirements noted</label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="check3">
                            <label class="form-check-label" for="check3">Guest count verified</label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="check4">
                            <label class="form-check-label" for="check4">Serving style confirmed</label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="check5">
                            <label class="form-check-label" for="check5">Beverage selection made</label>
                        </div>
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="check6">
                            <label class="form-check-label" for="check6">Special requests addressed</label>
                        </div>
                    </div>
                </div>

                <div class="card mt-3">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-boxes me-2"></i>Quick Actions</h5>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <a th:href="@{/catering/inventory/{id}(id=${booking.bookingId})}" class="btn btn-outline-primary">
                                <i class="fas fa-boxes me-1"></i>Generate Supply List
                            </a>
                            <a href="/catering/notifications" class="btn btn-outline-info">
                                <i class="fas fa-bell me-1"></i>View Notifications
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
